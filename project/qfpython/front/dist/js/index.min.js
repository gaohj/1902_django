function Banner(){this.bannerWidth=798,this.bannerGroup=$("#banner-group"),this.index=1,this.leftArrow=$(".left-arrow"),this.rightArrow=$(".right-arrow"),this.bannerUl=$("#banner-ul"),this.liList=this.bannerUl.children("li"),this.bannerCount=this.liList.length,this.pageControl=$(".page-control")}function Index(){var n=this;n.page=2,n.category_id=0,n.loadBtn=$("#load-more-btn")}Banner.prototype.initBanner=function(){var n=this,t=n.liList.eq(0).clone(),e=n.liList.eq(n.bannerCount-1).clone();n.bannerUl.append(t),n.bannerUl.prepend(e),n.bannerUl.css({width:n.bannerWidth*(n.bannerCount+2),left:-n.bannerWidth})},Banner.prototype.initPageControl=function(){for(var n=this,t=0;t<n.bannerCount;t++){var e=$("<li></li>");n.pageControl.append(e),0===t&&e.addClass("active")}n.pageControl.css({width:12*n.bannerCount+16+16*(n.bannerCount-1)})},Banner.prototype.toggleArrow=function(n){var t=this;n?(t.leftArrow.show(),t.rightArrow.show()):(t.leftArrow.hide(),t.rightArrow.hide())},Banner.prototype.animate=function(){var n=this;n.bannerUl.animate({left:-798*n.index},500);var t=n.index;t=0===t?n.bannerCount-1:t===n.bannerCount+1?0:n.index-1,n.pageControl.children("li").eq(t).addClass("active").siblings().removeClass("active")},Banner.prototype.loop=function(){var n=this;this.timer=setInterval(function(){n.index>=n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()},2e3)},Banner.prototype.listenArrowClick=function(){var n=this;n.leftArrow.click(function(){0===n.index?(n.bannerUl.css({left:-n.bannerCount*n.bannerWidth}),n.index=n.bannerCount-1):n.index--,n.animate()}),n.rightArrow.click(function(){n.index===n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()})},Banner.prototype.listenBannerHover=function(){var n=this;this.bannerGroup.hover(function(){clearInterval(n.timer),n.toggleArrow(!0)},function(){n.loop(),n.toggleArrow(!1)})},Banner.prototype.listenPageControl=function(){var e=this;e.pageControl.children("li").each(function(n,t){$(t).click(function(){e.index=n,e.animate()})})},Banner.prototype.run=function(){console.log("sss"),this.initBanner(),this.initPageControl(),this.loop(),this.listenBannerHover(),this.listenArrowClick(),this.listenPageControl()},Index.prototype.ListenLoadMoreEvent=function(){var i=this,r=$("#load-more-btn");r.click(function(){xfzajax.get({url:"/news/list/",data:{p:i.page,category_id:i.category_id},success:function(n){if(200===n.code){var t=n.data;if(0<t.length){var e=template("news-item",{newes:t});$(".list-inner-group").append(e),i.page+=1}else r.hide()}}})})},Index.prototype.listenCategorySwitchEvent=function(){var a=this;$(".list-tab").children().click(function(){var r=$(this),o=r.attr("data-category");xfzajax.get({url:"/news/list/",data:{category_id:o,p:1},success:function(n){if(200===n.code){var t=n.data,e=template("news-item",{newes:t}),i=$(".list-inner-group");i.empty(),i.append(e),a.page=2,a.category_id=o,r.addClass("active").siblings().removeClass("active"),a.loadBtn.show()}}})})},Index.prototype.run=function(){this.ListenLoadMoreEvent(),this.listenCategorySwitchEvent()},$(function(){(new Banner).run(),(new Index).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkJhbm5lciIsInRoaXMiLCJiYW5uZXJXaWR0aCIsImJhbm5lckdyb3VwIiwiJCIsImluZGV4IiwibGVmdEFycm93IiwicmlnaHRBcnJvdyIsImJhbm5lclVsIiwibGlMaXN0IiwiY2hpbGRyZW4iLCJiYW5uZXJDb3VudCIsImxlbmd0aCIsInBhZ2VDb250cm9sIiwiSW5kZXgiLCJzZWxmIiwicGFnZSIsImNhdGVnb3J5X2lkIiwibG9hZEJ0biIsInByb3RvdHlwZSIsImluaXRCYW5uZXIiLCJmaXJzdEJhbm5lciIsImVxIiwiY2xvbmUiLCJsYXN0QmFubmVyIiwiYXBwZW5kIiwicHJlcGVuZCIsImNzcyIsIndpZHRoIiwibGVmdCIsImluaXRQYWdlQ29udHJvbCIsImkiLCJjaXJjbGUiLCJhZGRDbGFzcyIsInRvZ2dsZUFycm93IiwiaXNTaG93Iiwic2hvdyIsImhpZGUiLCJhbmltYXRlIiwic2libGluZ3MiLCJyZW1vdmVDbGFzcyIsImxvb3AiLCJ0aW1lciIsInNldEludGVydmFsIiwibGlzdGVuQXJyb3dDbGljayIsImNsaWNrIiwibGlzdGVuQmFubmVySG92ZXIiLCJob3ZlciIsImNsZWFySW50ZXJ2YWwiLCJsaXN0ZW5QYWdlQ29udHJvbCIsImVhY2giLCJvYmoiLCJydW4iLCJjb25zb2xlIiwibG9nIiwiTGlzdGVuTG9hZE1vcmVFdmVudCIsInhmemFqYXgiLCJnZXQiLCJ1cmwiLCJkYXRhIiwicCIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJuZXdzZXMiLCJ0cGwiLCJ0ZW1wbGF0ZSIsIm5ld2VzIiwibGlzdGVuQ2F0ZWdvcnlTd2l0Y2hFdmVudCIsImxpIiwiYXR0ciIsIm5ld3NMaXN0R3JvdXAiLCJlbXB0eSJdLCJtYXBwaW5ncyI6IkFBc0JBLFNBQVNBLFNBQ0xDLEtBQUtDLFlBQWMsSUFDbkJELEtBQUtFLFlBQWNDLEVBQUUsaUJBQ3JCSCxLQUFLSSxNQUFRLEVBQ2JKLEtBQUtLLFVBQVlGLEVBQUUsZUFDbkJI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YSxLQUFVLENBQ3RCLElBQUlDLEVBQVNELEVBQWEsS0FDdEJFLEVBQU1DLFNBQVMsWUFBWSxDQUFDQyxNQUFRSCxJQUVwQ08sRUFBZ0JsRSxFQUFFLHFCQUN0QmtFLEVBQWNDLFFBQ2RELEVBQWM3QyxPQUFPdUMsR0FDckJqRCxFQUFLQyxLQUFPLEVBQ1pELEVBQUtFLFlBQWNBLEVBQ25CbUQsRUFBR25DLFNBQVMsVUFBVU0sV0FBV0MsWUFBWSxVQUM3Q3pCLEVBQUtHLFFBQVFrQixjQU1qQ3RCLE1BQU1LLFVBQVVpQyxJQUFLLFdBQ05uRCxLQUNOc0Qsc0JBRE10RCxLQUVOa0UsNkJBR1QvRCxFQUFFLFlBQ2UsSUFBSUosUUFDVm9ELE9BRUssSUFBSXRDLE9BQ1ZzQyIsImZpbGUiOiJpbmRleC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyDpnaLlkJHlr7nosaFcclxuLy8gMS4g5re75Yqg5bGe5oCnXHJcbi8vIOmAmui/h3RoaXPlhbPplK7lrZfvvIznu5HlrprlsZ7mgKfvvIzlubbkuJTmjIflrprku5bnmoTlgLzjgIJcclxuLy8g5Y6f5Z6L6ZO+XHJcbi8vIDIuIOa3u+WKoOaWueazlVxyXG4vLyDlnKhCYW5uZXIucHJvdG90eXBl5LiK57uR5a6a5pa55rOV5bCx5Y+v5Lul5LqG44CCXHJcblxyXG4vLyBmdW5jdGlvbiBCYW5uZXIoKSB7XHJcbi8vICAgICAvLyDov5nkuKrph4zpnaLlhpnnmoTku6PnoIFcclxuLy8gICAgIC8vIOebuOW9k+S6juaYr1B5dGhvbuS4reeahF9faW5pdF9f5pa55rOV55qE5Luj56CBXHJcbi8vICAgICBjb25zb2xlLmxvZygn5p6E6YCg5Ye95pWwJyk7XHJcbi8vICAgICB0aGlzLnBlcnNvbiA9ICd6aGlsaWFvJztcclxuLy8gfVxyXG4vL1xyXG4vLyBCYW5uZXIucHJvdG90eXBlLmdyZWV0ID0gZnVuY3Rpb24gKHdvcmQpIHtcclxuLy8gICAgIGNvbnNvbGUubG9nKCdoZWxsbyAnLHdvcmQpO1xyXG4vLyB9O1xyXG4vL1xyXG4vLyB2YXIgYmFubmVyID0gbmV3IEJhbm5lcigpO1xyXG4vLyBjb25zb2xlLmxvZyhiYW5uZXIucGVyc29uKTtcclxuLy8gYmFubmVyLmdyZWV0KCd6aGlsaWFvJyk7XHJcblxyXG5mdW5jdGlvbiBCYW5uZXIoKSB7XHJcbiAgICB0aGlzLmJhbm5lcldpZHRoID0gNzk4O1xyXG4gICAgdGhpcy5iYW5uZXJHcm91cCA9ICQoXCIjYmFubmVyLWdyb3VwXCIpO1xyXG4gICAgdGhpcy5pbmRleCA9IDE7XHJcbiAgICB0aGlzLmxlZnRBcnJvdyA9ICQoXCIubGVmdC1hcnJvd1wiKTtcclxuICAgIHRoaXMucmlnaHRBcnJvdyA9ICQoXCIucmlnaHQtYXJyb3dcIik7XHJcbiAgICB0aGlzLmJhbm5lclVsID0gJChcIiNiYW5uZXItdWxcIik7XHJcbiAgICB0aGlzLmxpTGlzdCA9IHRoaXMuYmFubmVyVWwuY2hpbGRyZW4oXCJsaVwiKTtcclxuICAgIHRoaXMuYmFubmVyQ291bnQgPSB0aGlzLmxpTGlzdC5sZW5ndGg7XHJcbiAgICB0aGlzLnBhZ2VDb250cm9sID0gJChcIi5wYWdlLWNvbnRyb2xcIik7XHJcbn1cclxuXHJcbkJhbm5lci5wcm90b3R5cGUuaW5pdEJhbm5lciA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBmaXJzdEJhbm5lciA9IHNlbGYubGlMaXN0LmVxKDApLmNsb25lKCk7XHJcbiAgICB2YXIgbGFzdEJhbm5lciA9IHNlbGYubGlMaXN0LmVxKHNlbGYuYmFubmVyQ291bnQtMSkuY2xvbmUoKTtcclxuICAgIHNlbGYuYmFubmVyVWwuYXBwZW5kKGZpcnN0QmFubmVyKTtcclxuICAgIHNlbGYuYmFubmVyVWwucHJlcGVuZChsYXN0QmFubmVyKTtcclxuICAgIHNlbGYuYmFubmVyVWwuY3NzKHtcIndpZHRoXCI6c2VsZi5iYW5uZXJXaWR0aCooc2VsZi5iYW5uZXJDb3VudCsyKSwnbGVmdCc6LXNlbGYuYmFubmVyV2lkdGh9KTtcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUuaW5pdFBhZ2VDb250cm9sID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgZm9yKHZhciBpPTA7IGk8c2VsZi5iYW5uZXJDb3VudDsgaSsrKXtcclxuICAgICAgICB2YXIgY2lyY2xlID0gJChcIjxsaT48L2xpPlwiKTtcclxuICAgICAgICBzZWxmLnBhZ2VDb250cm9sLmFwcGVuZChjaXJjbGUpO1xyXG4gICAgICAgIGlmKGkgPT09IDApe1xyXG4gICAgICAgICAgICBjaXJjbGUuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc2VsZi5wYWdlQ29udHJvbC5jc3Moe1wid2lkdGhcIjpzZWxmLmJhbm5lckNvdW50KjEyKzgqMisxNiooc2VsZi5iYW5uZXJDb3VudC0xKX0pO1xyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS50b2dnbGVBcnJvdyA9IGZ1bmN0aW9uIChpc1Nob3cpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIGlmKGlzU2hvdyl7XHJcbiAgICAgICAgc2VsZi5sZWZ0QXJyb3cuc2hvdygpO1xyXG4gICAgICAgIHNlbGYucmlnaHRBcnJvdy5zaG93KCk7XHJcbiAgICB9ZWxzZXtcclxuICAgICAgICBzZWxmLmxlZnRBcnJvdy5oaWRlKCk7XHJcbiAgICAgICAgc2VsZi5yaWdodEFycm93LmhpZGUoKTtcclxuICAgIH1cclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUuYW5pbWF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYuYmFubmVyVWwuYW5pbWF0ZSh7XCJsZWZ0XCI6LTc5OCpzZWxmLmluZGV4fSw1MDApO1xyXG4gICAgdmFyIGluZGV4ID0gc2VsZi5pbmRleDtcclxuICAgIGlmKGluZGV4ID09PSAwKXtcclxuICAgICAgICBpbmRleCA9IHNlbGYuYmFubmVyQ291bnQtMTtcclxuICAgIH1lbHNlIGlmKGluZGV4ID09PSBzZWxmLmJhbm5lckNvdW50KzEpe1xyXG4gICAgICAgIGluZGV4ID0gMDtcclxuICAgIH1lbHNle1xyXG4gICAgICAgIGluZGV4ID0gc2VsZi5pbmRleCAtIDE7XHJcbiAgICB9XHJcbiAgICBzZWxmLnBhZ2VDb250cm9sLmNoaWxkcmVuKCdsaScpLmVxKGluZGV4KS5hZGRDbGFzcyhcImFjdGl2ZVwiKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUubG9vcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYoc2VsZi5pbmRleCA+PSBzZWxmLmJhbm5lckNvdW50KzEpe1xyXG4gICAgICAgICAgICBzZWxmLmJhbm5lclVsLmNzcyh7XCJsZWZ0XCI6LXNlbGYuYmFubmVyV2lkdGh9KTtcclxuICAgICAgICAgICAgc2VsZi5pbmRleCA9IDI7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXgrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VsZi5hbmltYXRlKCk7XHJcbiAgICB9LDIwMDApO1xyXG59O1xyXG5cclxuXHJcbkJhbm5lci5wcm90b3R5cGUubGlzdGVuQXJyb3dDbGljayA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubGVmdEFycm93LmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZihzZWxmLmluZGV4ID09PSAwKXtcclxuICAgICAgICAgICAgLy8gPT3vvJoxID09ICcxJ++8mnRydWVcclxuICAgICAgICAgICAgLy8gPT09PSAxICE9ICcxJ1xyXG4gICAgICAgICAgICBzZWxmLmJhbm5lclVsLmNzcyh7XCJsZWZ0XCI6LXNlbGYuYmFubmVyQ291bnQqc2VsZi5iYW5uZXJXaWR0aH0pO1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gc2VsZi5iYW5uZXJDb3VudCAtIDE7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXgtLTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VsZi5hbmltYXRlKCk7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgc2VsZi5yaWdodEFycm93LmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZihzZWxmLmluZGV4ID09PSBzZWxmLmJhbm5lckNvdW50ICsgMSl7XHJcbiAgICAgICAgICAgIHNlbGYuYmFubmVyVWwuY3NzKHtcImxlZnRcIjotc2VsZi5iYW5uZXJXaWR0aH0pO1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gMjtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgc2VsZi5pbmRleCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5saXN0ZW5CYW5uZXJIb3ZlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHRoaXMuYmFubmVyR3JvdXAuaG92ZXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIOesrOS4gOS4quWHveaVsOaYr++8jOaKium8oOagh+enu+WKqOWIsGJhbm5lcuS4iuS8muaJp+ihjOeahOWHveaVsFxyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwoc2VsZi50aW1lcik7XHJcbiAgICAgICAgc2VsZi50b2dnbGVBcnJvdyh0cnVlKTtcclxuICAgIH0sZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIOesrOS6jOS4quWHveaVsOaYr++8jOaKium8oOagh+S7jmJhbm5lcuS4iuenu+i1sOS8muaJp+ihjOeahOWHveaVsFxyXG4gICAgICAgIHNlbGYubG9vcCgpO1xyXG4gICAgICAgIHNlbGYudG9nZ2xlQXJyb3coZmFsc2UpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmxpc3RlblBhZ2VDb250cm9sID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5wYWdlQ29udHJvbC5jaGlsZHJlbihcImxpXCIpLmVhY2goZnVuY3Rpb24gKGluZGV4LG9iaikge1xyXG4gICAgICAgICQob2JqKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSBpbmRleDtcclxuICAgICAgICAgICAgc2VsZi5hbmltYXRlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcblxyXG5CYW5uZXIucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnNvbGUubG9nKFwic3NzXCIpO1xyXG4gICAgdGhpcy5pbml0QmFubmVyKCk7XHJcbiAgICB0aGlzLmluaXRQYWdlQ29udHJvbCgpO1xyXG4gICAgdGhpcy5sb29wKCk7XHJcbiAgICB0aGlzLmxpc3RlbkJhbm5lckhvdmVyKCk7XHJcbiAgICB0aGlzLmxpc3RlbkFycm93Q2xpY2soKTtcclxuICAgIHRoaXMubGlzdGVuUGFnZUNvbnRyb2woKTtcclxufTtcclxuXHJcblxyXG5cclxuZnVuY3Rpb24gIEluZGV4KCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5wYWdlID0gMlxyXG4gICAgc2VsZi5jYXRlZ29yeV9pZCA9IDBcclxuICAgIHNlbGYubG9hZEJ0biA9ICQoJyNsb2FkLW1vcmUtYnRuJyk7XHJcbn1cclxuXHJcbkluZGV4LnByb3RvdHlwZS5MaXN0ZW5Mb2FkTW9yZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICB2YXIgbG9hZEJ0biA9ICQoJyNsb2FkLW1vcmUtYnRuJyk7XHJcbiAgICAgbG9hZEJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgIHhmemFqYXguZ2V0KHtcclxuICAgICAgICAgICAgICd1cmwnOicvbmV3cy9saXN0LycsXHJcbiAgICAgICAgICAgICAnZGF0YSc6e1xyXG4gICAgICAgICAgICAgICAgICdwJzpzZWxmLnBhZ2UsXHJcbiAgICAgICAgICAgICAgICAgJ2NhdGVnb3J5X2lkJzpzZWxmLmNhdGVnb3J5X2lkXHJcbiAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgJ3N1Y2Nlc3MnOmZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld3NlcyA9IHJlc3VsdFsnZGF0YSddO1xyXG4gICAgICAgICAgICAgICAgICAgICBpZihuZXdzZXMubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cGwgPSB0ZW1wbGF0ZShcIm5ld3MtaXRlbVwiLHtcIm5ld2VzXCI6bmV3c2VzfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVsID0gJCgnLmxpc3QtaW5uZXItZ3JvdXAnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgdWwuYXBwZW5kKHRwbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnBhZ2UgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRCdG4uaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgIH1cclxuICAgICAgICAgfSlcclxuICAgICB9KVxyXG59XHJcblxyXG5JbmRleC5wcm90b3R5cGUubGlzdGVuQ2F0ZWdvcnlTd2l0Y2hFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciB0YWJHcm91cCA9ICQoXCIubGlzdC10YWJcIik7XHJcbiAgICB0YWJHcm91cC5jaGlsZHJlbigpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyB0aGlz77ya5Luj6KGo5b2T5YmN6YCJ5Lit55qE6L+Z5LiqbGnmoIfnrb5cclxuICAgICAgICB2YXIgbGkgPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciBjYXRlZ29yeV9pZCA9IGxpLmF0dHIoXCJkYXRhLWNhdGVnb3J5XCIpO1xyXG4gICAgICAgIHZhciBwYWdlID0gMTtcclxuICAgICAgICB4ZnphamF4LmdldCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL25ld3MvbGlzdC8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICdjYXRlZ29yeV9pZCc6IGNhdGVnb3J5X2lkLFxyXG4gICAgICAgICAgICAgICAgJ3AnOiBwYWdlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld3NlcyA9IHJlc3VsdFsnZGF0YSddO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0cGwgPSB0ZW1wbGF0ZShcIm5ld3MtaXRlbVwiLHtcIm5ld2VzXCI6bmV3c2VzfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZW1wdHnvvJrlj6/ku6XlsIbov5nkuKrmoIfnrb7kuIvnmoTmiYDmnInlrZDlhYPntKDpg73liKDmjolcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3c0xpc3RHcm91cCA9ICQoXCIubGlzdC1pbm5lci1ncm91cFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBuZXdzTGlzdEdyb3VwLmVtcHR5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3c0xpc3RHcm91cC5hcHBlbmQodHBsKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnBhZ2UgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY2F0ZWdvcnlfaWQgPSBjYXRlZ29yeV9pZDtcclxuICAgICAgICAgICAgICAgICAgICBsaS5hZGRDbGFzcygnYWN0aXZlJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5sb2FkQnRuLnNob3coKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn07XHJcbkluZGV4LnByb3RvdHlwZS5ydW4gPWZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYuTGlzdGVuTG9hZE1vcmVFdmVudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5DYXRlZ29yeVN3aXRjaEV2ZW50KCk7XHJcbn1cclxuXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGJhbm5lciA9IG5ldyBCYW5uZXIoKTtcclxuICAgIGJhbm5lci5ydW4oKTtcclxuXHJcbiAgICB2YXIgaW5kZXggPSBuZXcgSW5kZXgoKTtcclxuICAgIGluZGV4LnJ1bigpO1xyXG59KTsiXX0=
