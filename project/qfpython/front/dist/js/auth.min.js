function Auth(){var t=this;t.maskWrapper=$(".mask-wrapper"),t.scrollWrapper=$(".scroll-wrapper"),t.smsCaptcha=$(".sms-captcha-btn")}Auth.prototype.run=function(){var t=this;t.listenShowHideEvent(),t.listenSwitchEvent(),t.ListenSigninEvent(),t.listenSmsCaptchaEvent(),t.ListenImageCaptchaEvent(),t.ListenSignupEvent()},Auth.prototype.showEvent=function(){this.maskWrapper.show()},Auth.prototype.hideEvent=function(){this.maskWrapper.hide()},Auth.prototype.listenShowHideEvent=function(){var t=this,n=$(".signin-btn"),e=$(".signup-btn"),a=$(".close-btn");n.click(function(){t.showEvent()}),e.click(function(){t.showEvent()}),a.click(function(){t.hideEvent()})},Auth.prototype.listenSwitchEvent=function(){var n=this;$(".switch").click(function(){var t=n.scrollWrapper.css("left");(t=parseInt(t))<0?n.scrollWrapper.animate({left:"0"}):n.scrollWrapper.animate({left:"-400px"})})},Auth.prototype.ListenSigninEvent=function(){var a=this,t=$(".signin-group"),s=t.find("input[name='telephone']"),i=t.find("input[name='password']"),c=t.find("input[name='remember']");t.find(".submit-btn").click(function(){var t=s.val(),n=i.val(),e=c.prop("checked");xfzajax.post({url:"/account/login/",data:{telephone:t,password:n,remember:e?1:0},success:function(t){200==t.code?(a.hideEvent(),window.location.reload(),messageBox.showSuccess("登录成功")):messageBox.showError("登录失败")},fail:function(t){console.log(t)}})})},Auth.prototype.listenSmsCaptchaEvent=function(){var n=this,t=n.smsCaptcha,e=$(".signup-group input[name='telephone']");t.click(function(){var t=e.val();t?xfzajax.get({url:"/account/sms_captcha/",data:{telephone:t},success:function(t){200==t.code?n.smsSuccessEvent():alert("失败")},fail:function(t){console.log(t)}}):alert("请输入手机号码")})},Auth.prototype.smsSuccessEvent=function(){var t=this;messageBox.showError("短信验证码发送成功"),t.smsCaptcha.addClass("disabled");var n=10;t.smsCaptcha.unbind("click");var e=setInterval(function(){t.smsCaptcha.text(n+"秒"),(n-=1)<=0&&(clearInterval(e),t.smsCaptcha.removeClass("disabled"),t.smsCaptcha.text("发送验证码"),t.listenSmsCaptchaEvent())},1e3)},Auth.prototype.ListenImageCaptchaEvent=function(){var t=$(".img-captcha");t.click(function(){t.attr("src","/account/img_captcha/?random="+Math.random())})},Auth.prototype.ListenSignupEvent=function(){var t=$(".signup-group"),n=t.find(".submit-btn"),o=t.find("input[name='telephone']"),p=t.find("input[name='username']"),r=t.find("input[name='img_captcha']"),u=t.find("input[name='sms_captcha']"),l=t.find("input[name='password1']"),h=t.find("input[name='password2']");n.click(function(t){t.preventDefault();var n=o.val(),e=l.val(),a=h.val(),s=p.val(),i=r.val(),c=u.val();xfzajax.post({url:"/account/register/",data:{telephone:n,password1:e,password2:a,username:s,img_captcha:i,sms_captcha:c},success:function(t){200==t.code?(window.location.reload(),alert("success")):alert("失败")},fail:function(t){console.log(t)}})})},$(function(){(new Auth).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGguanMiXSwibmFtZXMiOlsiQXV0aCIsInNlbGYiLCJ0aGlzIiwibWFza1dyYXBwZXIiLCIkIiwic2Nyb2xsV3JhcHBlciIsInNtc0NhcHRjaGEiLCJwcm90b3R5cGUiLCJydW4iLCJsaXN0ZW5TaG93SGlkZUV2ZW50IiwibGlzdGVuU3dpdGNoRXZlbnQiLCJMaXN0ZW5TaWduaW5FdmVudCIsImxpc3RlblNtc0NhcHRjaGFFdmVudCIsIkxpc3RlbkltYWdlQ2FwdGNoYUV2ZW50IiwiTGlzdGVuU2lnbnVwRXZlbnQiLCJzaG93RXZlbnQiLCJzaG93IiwiaGlkZUV2ZW50IiwiaGlkZSIsInNpZ25pbmJ0biIsInNpZ251cGJ0biIsImNsb3NlYnRuIiwiY2xpY2siLCJjdXJyZW50TGVmdCIsImNzcyIsInBhcnNlSW50IiwiYW5pbWF0ZSIsImxlZnQiLCJzaWduaW5Hcm91cCIsInRlbGVwaG9uZUlucHV0IiwiZmluZCIsInBhc3N3b3JkSW5wdXQiLCJyZW1lbWJlcklucHV0IiwidGVsZXBob25lIiwidmFsIiwicGFzc3dvcmQiLCJyZW1lbWJlciIsInByb3AiLCJ4ZnphamF4IiwicG9zdCIsInVybCIsImRhdGEiLCJzdWNjZXNzIiwicmVzdWx0Iiwid2luZG93IiwibG9jYXRpb24iLCJyZWxvYWQiLCJtZXNzYWdlQm94Iiwic2hvd1N1Y2Nlc3MiLCJzaG93RXJyb3IiLCJmYWlsIiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwiZ2V0Iiwic21zU3VjY2Vzc0V2ZW50IiwiYWxlcnQiLCJhZGRDbGFzcyIsImNvdW50IiwidW5iaW5kIiwidGltZXIiLCJzZXRJbnRlcnZhbCIsInRleHQiLCJjbGVhckludGVydmFsIiwicmVtb3ZlQ2xhc3MiLCJpbWdDYXB0Y2hhIiwiYXR0ciIsIk1hdGgiLCJyYW5kb20iLCJzaWdudXBHcm91cCIsInN1Ym1pdEJ0biIsInVzZXJuYW1lSW5wdXQiLCJpbWdDYXB0Y2hhSW5wdXQiLCJzbXNDYXB0Y2hhSW5wdXQiLCJwYXNzd29yZDFJbnB1dCIsInBhc3N3b3JkMklucHV0IiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInBhc3N3b3JkMSIsInBhc3N3b3JkMiIsInVzZXJuYW1lIiwiaW1nX2NhcHRjaGEiLCJzbXNfY2FwdGNoYSJdLCJtYXBwaW5ncyI6IkFBNEJBLFNBQVNBLE9BQ0wsSUFBSUMsRUFBT0MsS0FDWEQsRUFBS0UsWUFBY0MsRUFBRSxpQkFDckJILEVBQUtJLGNBQWdCRCxFQUFFLG1CQUN2QkgsRUFBS0ssV0FBYUYsRUFBRSxvQkFHeEJKLEtBQUtPLFVBQVVDLElBQU0sV0FDakIsSUFBSVAsRUFBT0MsS0FDWEQsRUFBS1Esc0JBQ0xSLEVBQUtTLG9CQUNMVCxFQUFLVSxvQkFDTFYsRUFBS1csd0JBQ0xYLEVBQUtZLDBCQUNMWixFQUFLYSxxQkFLVGQsS0FBS08sVUFBVVEsVUFBWSxXQUNaYixLQUNOQyxZQUFZYSxRQUlyQmhCLEtBQUtPLFVBQVVVLFVBQVksV0FDWmYsS0FDTkMsWUFBWWUsUUFHckJsQixLQUFLTyxVQUFVRSxvQkFBc0IsV0FDakMsSUFBSVIsRUFBT0MsS0FDUGlCLEVBQVlmLEVBQUUsZUFDZGdCLEVBQVloQixFQUFFLGVBQ2RpQixFQUFXakIsRUFBRSxjQUNqQmUsRUFBVUcsTUFBTSxXQUNackIsRUFBS2MsY0FHVEssRUFBVUUsTUFBTSxXQUNackIsRUFBS2MsY0FHVE0sRUFBU0MsTUFBTSxXQUNYckIsRUFBS2dCLGVBSWJqQixLQUFLTyxVQUFVRyxrQkFBb0IsV0FDM0IsSUFBSVQsRUFBT0MsS0FDSUUsRUFBRSxXQUNSa0IsTUFBTSxXQUNYLElBQUlDLEVBQWN0QixFQUFLSSxjQUFjbUIsSUFBSSxTQUN6Q0QsRUFBY0UsU0FBU0YsSUFDTixFQUNidEIsRUFBS0ksY0FBY3FCLFFBQVEsQ0FBQ0MsS0FBTyxNQUVuQzFCLEVBQUtJLGNBQWNxQixRQUFRLENBQUNDLEtBQU8sY0FLbkQzQixLQUFLTyxVQUFVSSxrQkFBbUIsV0FDOUIsSUFBSVYsRUFBT0MsS0FDUDBCLEVBQWN4QixFQUFFLGlCQUdoQnlCLEVB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XHJcbi8vXHJcbi8vIC8vIOeCueWHu+eZu+W9leaMiemSru+8jOW8ueWHuuaooeaAgeWvueivneahhlxyXG4vLyAkKGZ1bmN0aW9uICgpIHtcclxuLy8gICAgICQoXCIjYnRuXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuLy8gICAgICAgICAkKFwiLm1hc2std3JhcHBlclwiKS5zaG93KCk7XHJcbi8vICAgICB9KTtcclxuLy9cclxuLy8gICAgICQoXCIuY2xvc2UtYnRuXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuLy8gICAgICAgICAkKFwiLm1hc2std3JhcHBlclwiKS5oaWRlKCk7XHJcbi8vICAgICB9KTtcclxuLy8gfSk7XHJcbi8vXHJcbi8vXHJcbi8vICQoZnVuY3Rpb24gKCkge1xyXG4vLyAgICAgJChcIi5zd2l0Y2hcIikuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4vLyAgICAgICAgIHZhciBzY3JvbGxXcmFwcGVyID0gJChcIi5zY3JvbGwtd3JhcHBlclwiKTtcclxuLy8gICAgICAgICB2YXIgY3VycmVudExlZnQgPSBzY3JvbGxXcmFwcGVyLmNzcyhcImxlZnRcIik7XHJcbi8vICAgICAgICAgY3VycmVudExlZnQgPSBwYXJzZUludChjdXJyZW50TGVmdCk7XHJcbi8vICAgICAgICAgaWYoY3VycmVudExlZnQgPCAwKXtcclxuLy8gICAgICAgICAgICAgc2Nyb2xsV3JhcHBlci5hbmltYXRlKHtcImxlZnRcIjonMCd9KTtcclxuLy8gICAgICAgICB9ZWxzZXtcclxuLy8gICAgICAgICAgICAgc2Nyb2xsV3JhcHBlci5hbmltYXRlKHtcImxlZnRcIjpcIi00MDBweFwifSk7XHJcbi8vICAgICAgICAgfVxyXG4vLyAgICAgfSk7XHJcbi8vIH0pO1xyXG5cclxuLy/nsbvku6Xlj4rliJ3lp4vljJblrozmiJAgIOS4k+mXqOeUqOadpeaTjeS9nOeZu+W9leazqOWGjOeahFxyXG5mdW5jdGlvbiBBdXRoKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzOyAvL+WkmuS4quWcsOaWueeUqOWIsHRoaXNcclxuICAgIHNlbGYubWFza1dyYXBwZXIgPSAkKCcubWFzay13cmFwcGVyJyk7IC8v6I635Y+W5pW05Liq5qih5oCB5qGGXHJcbiAgICBzZWxmLnNjcm9sbFdyYXBwZXIgPSAkKCcuc2Nyb2xsLXdyYXBwZXInKTtcclxuICAgIHNlbGYuc21zQ2FwdGNoYSA9ICQoJy5zbXMtY2FwdGNoYS1idG4nKTtcclxufVxyXG5cclxuQXV0aC5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpc1xyXG4gICAgc2VsZi5saXN0ZW5TaG93SGlkZUV2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3RlblN3aXRjaEV2ZW50KCk7XHJcbiAgICBzZWxmLkxpc3RlblNpZ25pbkV2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3RlblNtc0NhcHRjaGFFdmVudCgpO1xyXG4gICAgc2VsZi5MaXN0ZW5JbWFnZUNhcHRjaGFFdmVudCgpO1xyXG4gICAgc2VsZi5MaXN0ZW5TaWdudXBFdmVudCgpO1xyXG59XHJcblxyXG5cclxuLy/nu5nnsbvlhpnmlrnms5UgIOiuqeWug+WBmuS7gOS5iFxyXG5BdXRoLnByb3RvdHlwZS5zaG93RXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXNcclxuICAgIHNlbGYubWFza1dyYXBwZXIuc2hvdygpXHJcbn1cclxuXHJcblxyXG5BdXRoLnByb3RvdHlwZS5oaWRlRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXNcclxuICAgIHNlbGYubWFza1dyYXBwZXIuaGlkZSgpXHJcbn1cclxuXHJcbkF1dGgucHJvdG90eXBlLmxpc3RlblNob3dIaWRlRXZlbnQgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIHNpZ25pbmJ0biA9ICQoJy5zaWduaW4tYnRuJylcclxuICAgIHZhciBzaWdudXBidG4gPSAkKCcuc2lnbnVwLWJ0bicpXHJcbiAgICB2YXIgY2xvc2VidG4gPSAkKCcuY2xvc2UtYnRuJylcclxuICAgIHNpZ25pbmJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5zaG93RXZlbnQoKVxyXG4gICAgfSlcclxuXHJcbiAgICBzaWdudXBidG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuc2hvd0V2ZW50KClcclxuICAgIH0pXHJcblxyXG4gICAgY2xvc2VidG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuaGlkZUV2ZW50KClcclxuICAgIH0pXHJcbn1cclxuXHJcbkF1dGgucHJvdG90eXBlLmxpc3RlblN3aXRjaEV2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHN3aXRjaGVyID0gJCgnLnN3aXRjaCcpO1xyXG4gICAgICAgIHN3aXRjaGVyLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGN1cnJlbnRMZWZ0ID0gc2VsZi5zY3JvbGxXcmFwcGVyLmNzcyhcImxlZnRcIik7XHJcbiAgICAgICAgICAgIGN1cnJlbnRMZWZ0ID0gcGFyc2VJbnQoY3VycmVudExlZnQpO1xyXG4gICAgICAgICAgICBpZihjdXJyZW50TGVmdCA8IDApe1xyXG4gICAgICAgICAgICAgICAgc2VsZi5zY3JvbGxXcmFwcGVyLmFuaW1hdGUoe1wibGVmdFwiOicwJ30pO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIHNlbGYuc2Nyb2xsV3JhcHBlci5hbmltYXRlKHtcImxlZnRcIjpcIi00MDBweFwifSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG59XHJcblxyXG5BdXRoLnByb3RvdHlwZS5MaXN0ZW5TaWduaW5FdmVudCA9ZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBzaWduaW5Hcm91cCA9ICQoJy5zaWduaW4tZ3JvdXAnKTtcclxuICAgIC8v6I635Y+W55m75b2V55qE5Yy65Z+fXHJcbiAgICAvL+iOt+WPluS4ieS4qui+k+WFpeahhiAg546w5Zyo5Y+q5piv5a6a5L2N5Yiw6L6T5YWl5qGGXHJcbiAgICB2YXIgdGVsZXBob25lSW5wdXQgPSBzaWduaW5Hcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ndGVsZXBob25lJ11cIilcclxuICAgIHZhciBwYXNzd29yZElucHV0ID0gc2lnbmluR3JvdXAuZmluZChcImlucHV0W25hbWU9J3Bhc3N3b3JkJ11cIilcclxuICAgIHZhciByZW1lbWJlcklucHV0ID0gc2lnbmluR3JvdXAuZmluZChcImlucHV0W25hbWU9J3JlbWVtYmVyJ11cIilcclxuICAgIHZhciBzdWJtaXRCdG4gPSBzaWduaW5Hcm91cC5maW5kKFwiLnN1Ym1pdC1idG5cIilcclxuICAgIHN1Ym1pdEJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy/ojrflj5bovpPlhaXmoYbovpPlhaXnmoTlhoXlrrlcclxuICAgICAgICB2YXIgdGVsZXBob25lID0gdGVsZXBob25lSW5wdXQudmFsKCk7XHJcbiAgICAgICAgdmFyIHBhc3N3b3JkID0gcGFzc3dvcmRJbnB1dC52YWwoKTtcclxuICAgICAgICB2YXIgcmVtZW1iZXIgPSByZW1lbWJlcklucHV0LnByb3AoJ2NoZWNrZWQnKTtcclxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzonL2FjY291bnQvbG9naW4vJyxcclxuICAgICAgICAgICAgJ2RhdGEnOntcclxuICAgICAgICAgICAgICAgICd0ZWxlcGhvbmUnOnRlbGVwaG9uZSxcclxuICAgICAgICAgICAgICAgICdwYXNzd29yZCc6cGFzc3dvcmQsXHJcbiAgICAgICAgICAgICAgICAncmVtZW1iZXInOnJlbWVtYmVyPzE6MCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOmZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddID09IDIwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5oaWRlRXZlbnQoKVxyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VCb3guc2hvd1N1Y2Nlc3MoJ+eZu+W9leaIkOWKnycpXHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlQm94LnNob3dFcnJvcign55m75b2V5aSx6LSlJylcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ2ZhaWwnOmZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxuXHJcblxyXG5cclxufVxyXG5cclxuLy/nm5HlkKznn63kv6Hlj5HpgIHkuovku7ZcclxuQXV0aC5wcm90b3R5cGUubGlzdGVuU21zQ2FwdGNoYUV2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBzbXNDYXB0Y2hhID0gc2VsZi5zbXNDYXB0Y2hhXHJcbiAgICB2YXIgdGVsZXBob25lSW5wdXQgPSAkKFwiLnNpZ251cC1ncm91cCBpbnB1dFtuYW1lPSd0ZWxlcGhvbmUnXVwiKVxyXG4gICAgc21zQ2FwdGNoYS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHRlbGVwaG9uZSA9IHRlbGVwaG9uZUlucHV0LnZhbCgpXHJcbiAgICAgICAgaWYoIXRlbGVwaG9uZSl7XHJcbiAgICAgICAgICAgIGFsZXJ0KCfor7fovpPlhaXmiYvmnLrlj7fnoIEnKVxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgeGZ6YWpheC5nZXQoe1xyXG4gICAgICAgICAgICAndXJsJzonL2FjY291bnQvc21zX2NhcHRjaGEvJyxcclxuICAgICAgICAgICAgJ2RhdGEnOntcclxuICAgICAgICAgICAgICAgICd0ZWxlcGhvbmUnOnRlbGVwaG9uZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6ZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ10gPT0gMjAwKXtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnNtc1N1Y2Nlc3NFdmVudCgpXHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICBhbGVydCgn5aSx6LSlJylcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ2ZhaWwnOmZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9KVxyXG59XHJcblxyXG4vL+WPkemAgeefreS/oeaMiemSriDngrnlh7vkuIDmrKHku6XlkI7npoHmraLngrnlh7sg5bm25YCS6K6h5pe2IOeEtuWQjuaBouWkjeeCueWHuyBcclxuQXV0aC5wcm90b3R5cGUuc21zU3VjY2Vzc0V2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIG1lc3NhZ2VCb3guc2hvd0Vycm9yKFwi55+t5L+h6aqM6K+B56CB5Y+R6YCB5oiQ5YqfXCIpXHJcbiAgICBzZWxmLnNtc0NhcHRjaGEuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICB2YXIgY291bnQgID0gMTBcclxuICAgIHNlbGYuc21zQ2FwdGNoYS51bmJpbmQoJ2NsaWNrJyk7XHJcbiAgICB2YXIgdGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5zbXNDYXB0Y2hhLnRleHQoY291bnQrJ+enkicpO1xyXG4gICAgICAgIGNvdW50IC09IDFcclxuICAgICAgICBpZihjb3VudDw9MCl7XHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpO1xyXG4gICAgICAgICAgICBzZWxmLnNtc0NhcHRjaGEucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICAgIHNlbGYuc21zQ2FwdGNoYS50ZXh0KCflj5HpgIHpqozor4HnoIEnKTtcclxuICAgICAgICAgICAgc2VsZi5saXN0ZW5TbXNDYXB0Y2hhRXZlbnQoKTtcclxuICAgICAgICB9XHJcbiAgICB9LDEwMDApXHJcbiAgICBcclxufVxyXG5cclxuXHJcbi8v5Zu+5b2i6aqM6K+B56CB5LqL5Lu2ICBcclxuQXV0aC5wcm90b3R5cGUuTGlzdGVuSW1hZ2VDYXB0Y2hhRXZlbnQgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIGltZ0NhcHRjaGEgPSAkKCcuaW1nLWNhcHRjaGEnKVxyXG4gICAgaW1nQ2FwdGNoYS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaW1nQ2FwdGNoYS5hdHRyKFwic3JjXCIsXCIvYWNjb3VudC9pbWdfY2FwdGNoYS9cIitcIj9yYW5kb209XCIrTWF0aC5yYW5kb20oKSlcclxuICAgIH0pXHJcbn1cclxuXHJcbi8v55uR5ZCs5rOo5YaM5LqL5Lu2XHJcblxyXG5BdXRoLnByb3RvdHlwZS5MaXN0ZW5TaWdudXBFdmVudCA9ZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBzaWdudXBHcm91cCA9ICQoJy5zaWdudXAtZ3JvdXAnKTtcclxuICAgIHZhciBzdWJtaXRCdG4gPSBzaWdudXBHcm91cC5maW5kKFwiLnN1Ym1pdC1idG5cIilcclxuICAgIC8v6I635Y+W55m75b2V55qE5Yy65Z+fXHJcbiAgICAvL+iOt+WPluS4ieS4qui+k+WFpeahhiAg546w5Zyo5Y+q5piv5a6a5L2N5Yiw6L6T5YWl5qGGXHJcbiAgICB2YXIgdGVsZXBob25lSW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ndGVsZXBob25lJ11cIilcclxuICAgIHZhciB1c2VybmFtZUlucHV0ID0gc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J3VzZXJuYW1lJ11cIilcclxuICAgIHZhciBpbWdDYXB0Y2hhSW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0naW1nX2NhcHRjaGEnXVwiKVxyXG4gICAgdmFyIHNtc0NhcHRjaGFJbnB1dCA9IHNpZ251cEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdzbXNfY2FwdGNoYSddXCIpXHJcbiAgICB2YXIgcGFzc3dvcmQxSW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ncGFzc3dvcmQxJ11cIilcclxuICAgIHZhciBwYXNzd29yZDJJbnB1dCA9IHNpZ251cEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdwYXNzd29yZDInXVwiKVxyXG5cclxuICAgIHN1Ym1pdEJ0bi5jbGljayhmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOy8v6Zi75q2i6buY6K6k5o+Q5Lqk5LqL5Lu2XHJcbiAgICAgICAgLy/ojrflj5bovpPlhaXmoYbovpPlhaXnmoTlhoXlrrlcclxuICAgICAgICB2YXIgdGVsZXBob25lID0gdGVsZXBob25lSW5wdXQudmFsKCk7XHJcbiAgICAgICAgdmFyIHBhc3N3b3JkMSA9IHBhc3N3b3JkMUlucHV0LnZhbCgpO1xyXG4gICAgICAgIHZhciBwYXNzd29yZDIgPSBwYXNzd29yZDJJbnB1dC52YWwoKTtcclxuICAgICAgICB2YXIgdXNlcm5hbWUgPSB1c2VybmFtZUlucHV0LnZhbCgpO1xyXG4gICAgICAgIHZhciBpbWdfY2FwdGNoYSA9IGltZ0NhcHRjaGFJbnB1dC52YWwoKTtcclxuICAgICAgICB2YXIgc21zX2NhcHRjaGEgPSBzbXNDYXB0Y2hhSW5wdXQudmFsKCk7XHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6Jy9hY2NvdW50L3JlZ2lzdGVyLycsXHJcbiAgICAgICAgICAgICdkYXRhJzp7XHJcbiAgICAgICAgICAgICAgICAndGVsZXBob25lJzp0ZWxlcGhvbmUsXHJcbiAgICAgICAgICAgICAgICAncGFzc3dvcmQxJzpwYXNzd29yZDEsXHJcbiAgICAgICAgICAgICAgICAncGFzc3dvcmQyJzpwYXNzd29yZDIsXHJcbiAgICAgICAgICAgICAgICAndXNlcm5hbWUnOnVzZXJuYW1lLFxyXG4gICAgICAgICAgICAgICAgJ2ltZ19jYXB0Y2hhJzppbWdfY2FwdGNoYSxcclxuICAgICAgICAgICAgICAgICdzbXNfY2FwdGNoYSc6c21zX2NhcHRjaGEsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzpmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PSAyMDApe1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxyXG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdzdWNjZXNzJylcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KCflpLHotKUnKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnZmFpbCc6ZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcilcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG5cclxuXHJcblxyXG59XHJcblxyXG5cclxuXHJcbi8v5a6e5L6L5YyW5a+56LGhXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGF1dGggPSBuZXcgQXV0aCgpO1xyXG4gICAgYXV0aC5ydW4oKSAvL+mAmui/h3J1buiwg+eUqOexu+aWueazlVxyXG59KSJdfQ==
